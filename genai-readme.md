# VPh06 ‚Äî –ö–µ–π—Å 3 ¬´–°–∞–π—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤¬ª (—É—Ä–æ–∫ 3)
## GenAI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è Cursor Agent (Auto Mode)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ `order-processing-vps-infra` –Ω–∞ Ubuntu 22.04.  
**VPS:** service.prompt-engineer.su (194.67.205.158)  
**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è —É—Ä–æ–∫–∞ 3.

---

## 0) –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê

### –ù–µ –ª–æ–º–∞–π —Ä–∞–±–æ—Ç–∞—é—â–µ–µ
- –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ù–ï –¢–†–û–ì–ê–ô
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ç–æ—á–µ—á–Ω—ã–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ
- –ë–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–≤ –∫–æ–¥–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å** —Å–µ–∫—Ä–µ—Ç—ã (API –∫–ª—é—á–∏, –ø–∞—Ä–æ–ª–∏, SECRET_KEY)
- –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `.env` —Ñ–∞–π–ª–µ
- –û–±—è–∑–∞—Ç–µ–ª–µ–Ω `.env.example` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)

### Smoke-check –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```bash
sudo docker compose up --build -d
sudo docker compose ps
sudo docker logs --tail 200 backend
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–π —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å ‚Äî –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–µ—Å—Ç–∏—Ä—É–π —á–µ—Ä–µ–∑ Swagger UI (`http://194.67.205.158:8000/docs`)

---

## 1) ACCEPTANCE CRITERIA (–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏)

### 1.1 –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **Backend API:**
   - `GET /api/auth/check` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"admin_exists": true/false}`
   - `POST /api/auth/register`:
     - –†–∞–∑—Ä–µ—à–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é **–¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∞–¥–º–∏–Ω–æ–≤ –Ω–µ—Ç**
     - –ò–Ω–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `403 Forbidden` –∏–ª–∏ `409 Conflict`
   - `POST /api/auth/login` ‚Äî –≤—ã–¥–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω
   - `GET /api/auth/me` ‚Äî (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∞

2. **Frontend (admin.html / login.html):**
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–∑—ã–≤–∞–π `GET /api/auth/check`
   - –ï—Å–ª–∏ `admin_exists: true` ‚Äî —Å–∫—Ä—ã–≤–∞–π —Ñ–æ—Ä–º—É/–∫–Ω–æ–ø–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –ï—Å–ª–∏ `admin_exists: false` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–π —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–π —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –¢–∞–±–ª–∏—Ü–∞ `admins` —Å –ø–æ–ª—è–º–∏: id, email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π), hashed_password, created_at
   - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt –∏–ª–∏ passlib)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –∞–¥–º–∏–Ω–∞ –æ–¥–∏–Ω —Ä–∞–∑
- –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ—Ç
- Swagger UI: —É—Å–ø–µ—à–Ω—ã–π login ‚Üí Authorize ‚Üí –≤—ã–∑–æ–≤ `/api/auth/me` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å

**URL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ê–¥–º–∏–Ω–∫–∞: https://service.prompt-engineer.su/admin.html
- Swagger: http://194.67.205.158:8000/docs (–µ—Å–ª–∏ –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç –≤ dev)

---

### 1.2 CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —É—Å–ª—É–≥

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏ —á–µ—Ä–µ–∑ –≤–∏–∑—É–∞–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **Backend API:**
   - `GET /api/admin-settings` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Å–ª—É–≥
   - `POST /api/admin-settings` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
   - `PUT /api/admin-settings/{id}` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∏
   - `DELETE /api/admin-settings/{id}` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∏
   - –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã JWT (–∫—Ä–æ–º–µ GET, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø)

2. **Frontend (admin.html):**
   - **–¢–∞–±–ª–∏—Ü–∞ —É—Å–ª—É–≥** —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: ID, –ù–∞–∑–≤–∞–Ω–∏–µ, –î–µ–π—Å—Ç–≤–∏—è
   - **–ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å"** ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–ª–∏ —Ñ–æ—Ä–º—É
   - **–ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"** (–∏–∫–æ–Ω–∫–∞ –∫–∞—Ä–∞–Ω–¥–∞—à–∞) ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - **–ö–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å"** (–∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã) ‚Äî —É–¥–∞–ª—è–µ—Ç –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
   - –ü–æ—Å–ª–µ –ª—é–±–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ `GET /api/admin-settings`

3. **Frontend (index.html):**
   - –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ "–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É" –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `GET /api/admin-settings`
   - –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∏ –≤ –∞–¥–º–∏–Ω–∫–µ ‚Äî –æ–Ω–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π

4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –¢–∞–±–ª–∏—Ü–∞ `admin_settings` –∏–ª–∏ `services` —Å –ø–æ–ª—è–º–∏: id, name, description (optional), created_at

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –°–æ–∑–¥–∞–π –º–∏–Ω–∏–º—É–º 5 —É—Å–ª—É–≥ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-—Ç–∞–±–ª–∏—Ü—É
- –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –æ–¥–Ω—É —É—Å–ª—É–≥—É ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å
- –£–¥–∞–ª–∏ –æ–¥–Ω—É —É—Å–ª—É–≥—É ‚Äî –æ–Ω–∞ –∏—Å—á–µ–∑–ª–∞ –≤–µ–∑–¥–µ
- Swagger UI: –≤—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200/201/204

**URL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ì–ª–∞–≤–Ω–∞—è: https://service.prompt-engineer.su/
- –ê–¥–º–∏–Ω–∫–∞: https://service.prompt-engineer.su/admin.html

---

### 1.3 –°–±–æ—Ä –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **Frontend (index.html):**
   
   –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `behavior-metrics.js`:
   
   ```javascript
   let timeOnPage = 0;
   let cursorPositions = [];
   let buttonsClicked = {};
   
   // –¢–∞–π–º–µ—Ä
   setInterval(() => {
     timeOnPage++;
   }, 1000);
   
   // –°–±–æ—Ä –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫—É—Ä—Å–æ—Ä–∞
   document.addEventListener('mousemove', (e) => {
     cursorPositions.push({x: e.clientX, y: e.clientY});
   });
   
   // –°–±–æ—Ä –∫–ª–∏–∫–æ–≤
   document.addEventListener('click', (e) => {
     const target = e.target.id || e.target.className || 'unknown';
     buttonsClicked[target] = (buttonsClicked[target] || 0) + 1;
   });
   
   // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
   setInterval(() => {
     fetch('/api/behavior-metrics/', {
       method: 'POST',
       headers: {'Content-Type': 'application/json'},
       body: JSON.stringify({
         application_id: 0,  // –î–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
         time_on_page: timeOnPage,
         buttons_clicked: JSON.stringify(buttonsClicked),
         cursor_positions: JSON.stringify(cursorPositions),
         return_frequency: 0
       })
     });
     // –û—á–∏—Å—Ç–∫–∞ –º–∞—Å—Å–∏–≤–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
     cursorPositions = [];
   }, 1000);
   ```

2. **Backend API:**
   - `POST /api/behavior-metrics/` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ë–î
   - **–í–ê–ñ–ù–û:** –ù–ï –≤–∞–ª–∏–¥–∏—Ä—É–π `application_id` –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞—è–≤–∫—É
   - –ï—Å–ª–∏ `application_id = 0` –∏–ª–∏ `null` ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–∏—à–∏ –º–µ—Ç—Ä–∏–∫–∏
   - `GET /api/behavior-metrics/stats` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
     - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
     - –¢–æ–ø –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫—É—Ä—Å–æ—Ä–∞ –¥–ª—è heatmap

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –¢–∞–±–ª–∏—Ü–∞ `behavior_metrics`:
     ```sql
     CREATE TABLE behavior_metrics (
       id SERIAL PRIMARY KEY,
       application_id INTEGER,  -- –º–æ–∂–µ—Ç –±—ã—Ç—å NULL –∏–ª–∏ 0
       time_on_page INTEGER,
       buttons_clicked TEXT,  -- JSON —Å—Ç—Ä–æ–∫–∞
       cursor_positions TEXT,  -- JSON —Å—Ç—Ä–æ–∫–∞
       return_frequency INTEGER,
       created_at TIMESTAMP DEFAULT NOW()
     );
     ```

4. **Frontend (admin.html):**
   - –†–∞–∑–¥–µ–ª "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
   - –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å:
     - **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:** –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö –∏–ª–∏ –º–∏–Ω—É—Ç–∞—Ö)
     - **Heatmap:** –¥–≤—É–º–µ—Ä–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ (canvas/plotly/chart.js) —Å —Ç–æ—á–∫–∞–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫—É—Ä—Å–æ—Ä–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- 2-3 –º–∏–Ω—É—Ç—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ https://service.prompt-engineer.su/
- –í —Ç–∞–±–ª–∏—Ü–µ `behavior_metrics` –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏
- –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ heatmap

---

### 1.4 –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞—è–≤–æ–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ —Ä–∞–Ω–∂–∏—Ä—É—é—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É ("—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ").

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **SQL —Å–∫—Ä–∏–ø—Ç:** –°–æ–∑–¥–∞–π `scripts/seed_applications.sql`:

   ```sql
   -- 4 —Å—Ä–æ—á–Ω—ã–µ –∑–∞—è–≤–∫–∏ (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   INSERT INTO applications (name, surname, patronymic, email, phone, service_id, 
       business_info, business_niche, company_size, budget, deadline, 
       convenient_time, preferred_contact_method, additional_comments, created_at)
   VALUES
   -- –°—Ä–æ—á–Ω–∞—è 1: –ë–æ–ª—å—à–æ–π –±—é–¥–∂–µ—Ç + –∫—Ä—É–ø–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è + —Å—Ä–æ—á–Ω—ã–π —Å—Ä–æ–∫
   ('–ò–≤–∞–Ω', '–ü–µ—Ç—Ä–æ–≤', '–°–µ—Ä–≥–µ–µ–≤–∏—á', 'ivan@bigcompany.ru', '+79001234567', 1,
    '–ö—Ä—É–ø–Ω—ã–π —Ö–æ–ª–¥–∏–Ω–≥, –Ω—É–∂–Ω–∞ —Å—Ä–æ—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞', 'IT', '500+', '5000000-10000000',
    '1 –Ω–µ–¥–µ–ª—è', '9:00-18:00', 'phone', '–û—á–µ–Ω—å —Å—Ä–æ—á–Ω–æ!', NOW() - INTERVAL '1 hour'),
   
   -- ... –µ—â–µ 3 —Å—Ä–æ—á–Ω—ã–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
   
   -- 3 —Å—Ä–µ–¥–Ω–∏–µ –∑–∞—è–≤–∫–∏ (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   ('–ê–ª–µ–∫—Å–µ–π', '–°–º–∏—Ä–Ω–æ–≤', '–ü–µ—Ç—Ä–æ–≤–∏—á', 'alex@mediumco.ru', '+79001112233', 2,
    '–°—Ä–µ–¥–Ω–∏–π –±–∏–∑–Ω–µ—Å, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ä–æ–∫–∏', 'E-commerce', '50-100', '500000-1000000',
    '1 –º–µ—Å—è—Ü', '10:00-19:00', 'email', '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç', NOW() - INTERVAL '2 hours'),
   
   -- ... –µ—â–µ 2 —Å—Ä–µ–¥–Ω–∏–µ
   
   -- 3 –Ω–∏–∑–∫–∏–µ –∑–∞—è–≤–∫–∏ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   ('–ú–∞—Ä–∏—è', '–ù–æ–≤–∏–∫–æ–≤–∞', '–ò–≤–∞–Ω–æ–≤–Ω–∞', 'maria@smallbiz.ru', '+79003334455', 3,
    '–ú–∞–ª—ã–π –±–∏–∑–Ω–µ—Å, –±–µ–∑ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏', '–£—Å–ª—É–≥–∏', '1-10', '50000-100000',
    '3 –º–µ—Å—è—Ü–∞', '–≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è', 'telegram', '–ü—Ä–æ—Å—Ç–æ —É–∑–Ω–∞—Ç—å —Ü–µ–Ω—É', NOW() - INTERVAL '1 day');
   
   -- ... –µ—â–µ 2 –Ω–∏–∑–∫–∏–µ
   ```

2. **Backend API:**
   - `GET /api/applications` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫
   - **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:**
     - –í—ã—á–∏—Å–ª–∏ score –Ω–∞ –æ—Å–Ω–æ–≤–µ: –±—é–¥–∂–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏, —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
     - –§–æ—Ä–º—É–ª–∞ –ø—Ä–∏–º–µ—Ä–Ω–∞—è: `score = budget_weight * budget_score + company_size_weight * size_score + urgency_weight * urgency_score`
     - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: `ORDER BY score DESC`
   - `GET /api/applications/{id}` ‚Äî –¥–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏

3. **–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ (–ø—Ä–∏–º–µ—Ä):**

   ```python
   def calculate_priority_score(application):
       score = 0
       
       # –ë—é–¥–∂–µ—Ç (–≤–µ—Å 40%)
       if '5000000' in application.budget:
           score += 40
       elif '1000000' in application.budget:
           score += 30
       elif '500000' in application.budget:
           score += 20
       else:
           score += 10
       
       # –†–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ (–≤–µ—Å 30%)
       if '500+' in application.company_size:
           score += 30
       elif '100-500' in application.company_size:
           score += 20
       elif '50-100' in application.company_size:
           score += 15
       else:
           score += 5
       
       # –°—Ä–æ—á–Ω–æ—Å—Ç—å (–≤–µ—Å 30%)
       if '–Ω–µ–¥–µ–ª—è' in application.deadline or '—Å—Ä–æ—á–Ω–æ' in application.additional_comments.lower():
           score += 30
       elif '–º–µ—Å—è—Ü' in application.deadline:
           score += 15
       else:
           score += 5
       
       return score
   ```

4. **Frontend (admin.html):**
   - –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
     - –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω/–∑–Ω–∞—á–æ–∫ üî• ‚Äî –≤—ã—Å–æ–∫–∏–π (score > 80)
     - –ñ–µ–ª—Ç—ã–π —Ñ–æ–Ω/–∑–Ω–∞—á–æ–∫ ‚ö†Ô∏è ‚Äî —Å—Ä–µ–¥–Ω–∏–π (score 50-80)
     - –ó–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω/–∑–Ω–∞—á–æ–∫ ‚úÖ ‚Äî –Ω–∏–∑–∫–∏–π (score < 50)
   - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä" ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞—è–≤–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –í—ã–ø–æ–ª–Ω–∏ SQL –≤ pgAdmin
- –í –∞–¥–º–∏–Ω–∫–µ —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω: 4 —Å—Ä–æ—á–Ω—ã–µ ‚Üí 3 —Å—Ä–µ–¥–Ω–∏–µ ‚Üí 3 –Ω–∏–∑–∫–∏–µ
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –ª—é–±–æ–π –∑–∞—è–≤–∫–∏

---

### 1.5 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–µ–ø–ª–æ–π

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ–¥-—Ä–µ–∂–∏–º —Å –∑–∞–∫—Ä—ã—Ç—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø–æ–º —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ HTTPS 443.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **docker-compose.yml:**

   ```yaml
   version: '3.8'
   
   services:
     nginx:
       image: nginx:alpine
       ports:
         - "443:443"
         - "80:80"  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
       volumes:
         - ./nginx/conf.d:/etc/nginx/conf.d
         - ./frontend/dist:/usr/share/nginx/html
         - ./ssl:/etc/nginx/ssl
       depends_on:
         - backend
       restart: unless-stopped
     
     backend:
       build: ./backend
       # –í–ê–ñ–ù–û: –ù–ï–¢ —Å–µ–∫—Ü–∏–∏ ports: –Ω–∞—Ä—É–∂—É!
       expose:
         - "8000"
       environment:
         - DATABASE_URL=${DATABASE_URL}
         - SECRET_KEY=${SECRET_KEY}
       depends_on:
         - postgres
       restart: unless-stopped
     
     postgres:
       image: postgres:15
       # –í–ê–ñ–ù–û: –ù–ï–¢ —Å–µ–∫—Ü–∏–∏ ports: –Ω–∞—Ä—É–∂—É!
       environment:
         - POSTGRES_USER=${POSTGRES_USER}
         - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
         - POSTGRES_DB=${POSTGRES_DB}
       volumes:
         - postgres_data:/var/lib/postgresql/data
       restart: unless-stopped
     
     watchtower:
       image: containrrr/watchtower
       volumes:
         - /var/run/docker.sock:/var/run/docker.sock
       restart: unless-stopped
     
     # –û–¢–ö–õ–Æ–ß–ï–ù–´ –≤ prod (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª—å dev):
     # pgadmin:
     #   profiles: ["dev"]
     #   ...
     
     # registry:
     #   profiles: ["dev"]
     #   ...
   
   volumes:
     postgres_data:
   ```

2. **nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`nginx/conf.d/default.conf`):**

   ```nginx
   # –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è 403)
   server {
       listen 8000;
       return 403 "Access denied";
   }
   
   server {
       listen 5432;
       return 403 "Access denied";
   }
   
   # –†–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS
   server {
       listen 80;
       server_name service.prompt-engineer.su 194.67.205.158;
       return 301 https://$host$request_uri;
   }
   
   # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä HTTPS
   server {
       listen 443 ssl;
       server_name service.prompt-engineer.su 194.67.205.158;
       
       ssl_certificate /etc/nginx/ssl/cert.pem;
       ssl_certificate_key /etc/nginx/ssl/key.pem;
       
       # –§—Ä–æ–Ω—Ç–µ–Ω–¥
       location / {
           root /usr/share/nginx/html;
           index index.html;
           try_files $uri $uri/ /index.html;
       }
       
       # API –±—ç–∫–µ–Ω–¥–∞
       location /api/ {
           proxy_pass http://backend:8000/api/;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
       }
   }
   ```

3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:**

   ```bash
   mkdir -p ssl
   openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
     -keyout ssl/key.pem -out ssl/cert.pem \
     -subj "/CN=service.prompt-engineer.su"
   ```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- `sudo docker compose up --build -d`
- `sudo docker compose ps` ‚Äî –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ nginx, backend, postgres, watchtower
- `curl -i http://194.67.205.158:8000/` ‚Üí `403 Forbidden` –∏–ª–∏ connection refused
- `curl -i http://194.67.205.158:5432/` ‚Üí `403 Forbidden` –∏–ª–∏ connection refused
- `curl -kI https://service.prompt-engineer.su/` ‚Üí `200 OK`

**URL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- HTTPS —Å–∞–π—Ç: https://service.prompt-engineer.su/
- IP: https://194.67.205.158/

---

### 1.6 –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **Backend (FastAPI):**
   ```python
   import logging
   
   logging.basicConfig(
       level=logging.INFO,
       format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
   )
   
   logger = logging.getLogger(__name__)
   
   @app.post("/api/behavior-metrics/")
   async def create_metrics(metrics: BehaviorMetrics):
       logger.info(f"Received metrics: application_id={metrics.application_id}, time={metrics.time_on_page}")
       # ...
   ```

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
   ```bash
   sudo docker logs -f backend
   sudo docker logs -f nginx
   ```

3. **–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö:**
   - –ü—Ä–æ–≤–µ—Ä—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON —á–µ—Ä–µ–∑ Swagger UI
   - –ü—Ä–æ–≤–µ—Ä—å nginx —Ä–æ—É—Ç–∏–Ω–≥ `/api/*`
   - –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- `sudo docker logs -f backend` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–µ—Ç—Ä–∏–∫ –≤–∏–¥–Ω—ã –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## 2) –ü–û–†–Ø–î–û–ö –†–ê–ë–û–¢ (—Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

### –®–∞–≥ 1: –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è

1. –û—Ç–∫—Ä–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –∏–∑—É—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
   - `backend/` ‚Äî FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - `frontend/` ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (HTML, CSS, JS)
   - `nginx/` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
   - `docker-compose.yml` ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

2. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   sudo docker compose up --build -d
   sudo docker compose ps
   sudo docker logs --tail 200 backend
   ```

3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π —Ç–µ–∫—É—â–∏–µ URL:
   - –ì–ª–∞–≤–Ω–∞—è: https://service.prompt-engineer.su/
   - –ê–¥–º–∏–Ω–∫–∞: https://service.prompt-engineer.su/admin.html
   - Swagger: http://194.67.205.158:8000/docs (–≤ dev, –µ—Å–ª–∏ –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç)

### –®–∞–≥ 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. –°–æ–∑–¥–∞–π –º–æ–¥–µ–ª—å –∞–¥–º–∏–Ω–∞ –≤ backend (`models.py` –∏–ª–∏ `database.py`)
2. –°–æ–∑–¥–∞–π —Ä–æ—É—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`routers/auth.py`):
   - `/api/auth/check`
   - `/api/auth/register`
   - `/api/auth/login`
   - `/api/auth/me`
3. –û–±–Ω–æ–≤–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (`admin.html` –∏–ª–∏ `login.html`):
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤—ã–∑—ã–≤–∞–π `/api/auth/check`
   - –ü–æ–∫–∞–∑—ã–≤–∞–π/—Å–∫—Ä—ã–≤–∞–π —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. Smoke-check —á–µ—Ä–µ–∑ Swagger UI

### –®–∞–≥ 3: CRUD —É—Å–ª—É–≥

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `admin_settings` –∏–ª–∏ `services` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –°–æ–∑–¥–∞–π/–æ–±–Ω–æ–≤–∏ —Ä–æ—É—Ç—ã CRUD (`routers/admin_settings.py`)
3. –û–±–Ω–æ–≤–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
   - –¢–∞–±–ª–∏—Ü–∞ —Å —É—Å–ª—É–≥–∞–º–∏
   - –§–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ö–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
4. –û–±–Ω–æ–≤–∏ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —É—Å–ª—É–≥ –∏–∑ API
5. Smoke-check: —Å–æ–∑–¥–∞–π 5 —É—Å–ª—É–≥, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π, —É–¥–∞–ª–∏

### –®–∞–≥ 4: –ú–µ—Ç—Ä–∏–∫–∏

1. –°–æ–∑–¥–∞–π `behavior-metrics.js` –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
2. –ü–æ–¥–∫–ª—é—á–∏ —Å–∫—Ä–∏–ø—Ç –∫ `index.html`
3. –°–æ–∑–¥–∞–π —Ä–æ—É—Ç `POST /api/behavior-metrics/` –≤ backend
4. –£–±–µ—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é `application_id` (—Ä–∞–∑—Ä–µ—à–∏ 0 –∏ null)
5. –°–æ–∑–¥–∞–π —Ä–æ—É—Ç `GET /api/behavior-metrics/stats` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
6. –î–æ–±–∞–≤—å —Ä–∞–∑–¥–µ–ª "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" –≤ –∞–¥–º–∏–Ω–∫—É
7. Smoke-check: 2-3 –º–∏–Ω—É—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π ‚Üí –ø—Ä–æ–≤–µ—Ä—å –ë–î ‚Üí –æ—Ç–∫—Ä–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –®–∞–≥ 5: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

1. –°–æ–∑–¥–∞–π `scripts/seed_applications.sql` —Å 10 –∑–∞—è–≤–∫–∞–º–∏
2. –î–æ–±–∞–≤—å —Ñ—É–Ω–∫—Ü–∏—é `calculate_priority_score()` –≤ backend
3. –û–±–Ω–æ–≤–∏ `GET /api/applications` ‚Äî –¥–æ–±–∞–≤—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ score
4. –û–±–Ω–æ–≤–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
   - –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
   - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä" ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
5. Smoke-check: –≤—ã–ø–æ–ª–Ω–∏ SQL ‚Üí –æ—Ç–∫—Ä–æ–π —Å–ø–∏—Å–æ–∫ ‚Üí –ø—Ä–æ–≤–µ—Ä—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É

### –®–∞–≥ 6: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. –£–±–µ—Ä–∏ —Å–µ–∫—Ü–∏–∏ `ports:` —É backend –∏ postgres –≤ `docker-compose.yml`
2. –î–æ–±–∞–≤—å nginx-–∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ 8000 –∏ 5432 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –û—Ç–∫–ª—é—á–∏ pgadmin –∏ registry (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –∏–ª–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å dev)
4. –ü—Ä–æ–≤–µ—Ä—å nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (SSL, proxy_pass)
5. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏: `sudo docker compose up --build -d`
6. Smoke-check: `curl` –Ω–∞ –ø–æ—Ä—Ç—ã 8000, 5432, 443

### –®–∞–≥ 7: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

1. –ü—Ä–æ–π–¥–∏—Å—å –ø–æ –≤—Å–µ–º –ø—É–Ω–∫—Ç–∞–º acceptance criteria
2. –°–æ–∑–¥–∞–π README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∑–∞–ø—É—Å–∫–∞
3. –ü—Ä–æ–≤–µ—Ä—å .env.example
4. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ

---

## 3) DONE DEFINITION

–ó–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π, –∫–æ–≥–¥–∞:

- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞
- ‚úÖ Swagger UI: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å 5+ —É—Å–ª—É–≥, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ API
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏: —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π, –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ë–î
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è + heatmap)
- ‚úÖ SQL —Å–∫—Ä–∏–ø—Ç: —Å–æ–∑–¥–∞–µ—Ç 10 –∑–∞—è–≤–æ–∫ (4 urgent, 3 medium, 3 low)
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –∑–∞—è–≤–∫–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞—è–≤–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ–¥-—Ä–µ–∂–∏–º: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 443
- ‚úÖ –ü–æ—Ä—Ç—ã 8000 –∏ 5432 –∑–∞–∫—Ä—ã—Ç—ã (403 –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã)
- ‚úÖ pgAdmin –∏ registry –æ—Ç–∫–ª—é—á–µ–Ω—ã
- ‚úÖ –õ–æ–≥–∏ backend –¥–æ—Å—Ç—É–ø–Ω—ã: `docker logs -f backend`
- ‚úÖ –ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ (–≤—Å–µ –≤ .env)
- ‚úÖ –ï—Å—Ç—å README.md –∏ .env.example
- ‚úÖ –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://service.prompt-engineer.su/

---

## 4) TROUBLESHOOTING GUIDE

### –ü—Ä–æ–±–ª–µ–º–∞: Endpoint –Ω–µ –Ω–∞–π–¥–µ–Ω (404)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
sudo docker logs -f backend | grep -i error
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —Ä–æ—É—Ç–∏–Ω–≥ –≤ nginx (`/api/*` ‚Üí `backend:8000`)
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ä–æ—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ FastAPI: `app.include_router(auth_router)`
- –ü—Ä–æ–≤–µ—Ä—å –±–∞–∑–æ–≤—ã–π path: `APIRouter(prefix="/api/auth")`

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è (422 Unprocessable Entity)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- –û—Ç–∫—Ä–æ–π DevTools ‚Üí Network ‚Üí –Ω–∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å
- –ü–æ—Å–º–æ—Ç—Ä–∏ Request Payload –∏ Response

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é `application_id` –∫–∞–∫ FK
- –†–∞–∑—Ä–µ—à–∏ `application_id: Optional[int] = None`
- –ò–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–π –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd frontend
npm run build
sudo docker compose restart nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å `SECRET_KEY` –≤ .env (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–ª–∏–Ω–Ω—ã–π hex)
- –ü—Ä–æ–≤–µ—Ä—å –∑–∞–≥–æ–ª–æ–≤–æ–∫: `Authorization: Bearer <token>`
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫ (exp claim)

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout ssl/key.pem -out ssl/cert.pem \
  -subj "/CN=service.prompt-engineer.su"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ nginx
sudo docker compose restart nginx
```

---

## 5) –í–ê–ñ–ù–´–ï –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–Ø

1. **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π smoke-check –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
2. **–ù–µ –∫–æ–º–º–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π .env
3. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** ‚Äî –±–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
4. **Swagger UI ‚Äî —Ç–≤–æ–π –¥—Ä—É–≥** ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–π —Ç–∞–º –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
5. **–õ–æ–≥–∏ ‚Äî —Ç–≤–æ–µ –≤—Å—ë** ‚Äî `docker logs -f backend`
6. **–î–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:** –æ–¥–∏–Ω –¥–ª—è Docker, –¥—Ä—É–≥–æ–π –¥–ª—è npm run build
7. **–í–∞–ª–∏–¥–∏—Ä—É–π JSON** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π Swagger UI –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞
8. **–î–æ–º–µ–Ω:** service.prompt-engineer.su (194.67.205.158)
9. **Reverse DNS –Ω–µ –Ω—É–∂–µ–Ω** ‚Äî –¥–ª—è —É—á–µ–±–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ A-–∑–∞–ø–∏—Å–∏

**–£—Å–ø–µ—à–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ**
